(()=>{"use strict";window.userService=new class{getUsers(){return fetch("http://localhost:4545/users").then((e=>e.json()))}addUser(e){return fetch("http://localhost:4545/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json()))}removeUser(e){return fetch(`http://localhost:4545/users/${e}`,{method:"DELETE"}).then((e=>e.json()))}changeUser(e,t){return fetch(`http://localhost:4545/users/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json()))}getUser(e){return fetch(`http://localhost:4545/users/${e}`).then((e=>e.json()))}editUser(e,t){return fetch(`http://localhost:4545/users/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json()))}},window.loginService=new class{getUsers(){return fetch("http://localhost:4545/password").then((e=>e.json()))}},userService.getUsers().then((e=>{(e=>{const t=document.getElementById("table"),n=document.getElementById("typeItem");let s=[];t.innerHTML="",n.innerHTML="",e.forEach((e=>{t.insertAdjacentHTML("beforeend",`\n            <tr class="table__row">\n                <td class="table__id table__cell">${e.id}</td>\n                <td class="table-type table__cell">${e.type}</td>\n                <td class="table-name table__cell">\n                    ${e.name}\n                </td>\n                <td class="table-units table__cell">\n                    ${e.units}\n                </td>\n                <td class="table-cost table__cell">\n                    ${e.cost} руб\n                </td>\n                <td>\n                    <div class="table__actions table__cell">\n                        <button class="button action-change"><span class="svg_ui"><svg class="action-icon_change"><use xlink:href="./img/sprite.svg#change"></use></svg></span><span>Изменить</span>\n                        </button>\n                        <button class="button action-remove"><span class="svg_ui"><svg class="action-icon_remove"><use xlink:href="./img/sprite.svg#remove"></use></svg></span><span>Удалить</span>\n                        </button>\n                    </div>\n                </td>\n            </tr>\n            \n        `),s.push(e.type)}));let o=Array.from(new Set(s));n.insertAdjacentHTML("beforeend",'\n        <option value="Все услуги">Все услуги</option>  \n    '),o.forEach((e=>{n.insertAdjacentHTML("beforeend",`\n            <option value="${e}">${e}</option>  \n        `)})),n.addEventListener("change",(()=>{t.querySelectorAll(".table__row").forEach((e=>{-1==e.innerHTML.search(`${n.value}`)&&"Все услуги"!=n.value?e.style.display="none":e.style.display=""}))}))})(e)})),loginService.getUsers().then((e=>{(e=>{const t=document.getElementById("name"),n=document.querySelector('input[type="password"]'),s=document.querySelector("form"),o=s.querySelectorAll("input");s.querySelectorAll("span")[0].style.display="none",s.querySelectorAll("span")[1].style.display="none",o.forEach((e=>{e.addEventListener("input",(e=>{s.querySelectorAll("span")[0].style.display="none",s.querySelectorAll("span")[1].style.display="none"}))})),s.addEventListener("submit",(o=>{o.preventDefault(),e.forEach((e=>{e.admin==t.value&&e.password==n.value?(t.value="",n.value="",document.location.href=`${document.location.href}table.html`,document.cookie="login = true"):(s.querySelectorAll("span")[0].style.display="",s.querySelectorAll("span")[1].style.display="",t.value="",n.value="")}))}))})(e)})),"/admin/table.html"!=document.location.pathname||/login=true/g.test(document.cookie)||(document.location.href=`${document.location.protocol}//${document.location.host}/admin/`)})();